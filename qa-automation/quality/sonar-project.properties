# =============================================================================
# SonarQube Configuration
# =============================================================================
# Configuration for SonarQube/SonarCloud static analysis.
# =============================================================================

# Project identification
sonar.projectKey=cursor-ai
sonar.projectName=Cursor AI Application
sonar.projectVersion=1.0.0
sonar.organization=dnistrova

# Source code location
sonar.sources=frontend/src,backend/app
sonar.tests=frontend/e2e,backend/tests,qa-automation/tests

# Encoding
sonar.sourceEncoding=UTF-8

# =============================================================================
# FRONTEND (TypeScript/React)
# =============================================================================
sonar.typescript.lcov.reportPaths=frontend/coverage/lcov.info
sonar.javascript.lcov.reportPaths=frontend/coverage/lcov.info

# TypeScript configuration
sonar.typescript.tsconfigPath=frontend/tsconfig.json

# Exclusions
sonar.exclusions=\
  **/node_modules/**,\
  **/dist/**,\
  **/build/**,\
  **/*.test.ts,\
  **/*.spec.ts,\
  **/venv/**,\
  **/__pycache__/**,\
  **/migrations/**

# Test exclusions
sonar.test.exclusions=\
  **/node_modules/**,\
  **/dist/**

# =============================================================================
# BACKEND (Python/Flask)
# =============================================================================
sonar.python.coverage.reportPaths=backend/coverage.xml
sonar.python.version=3.11

# Python source directories
sonar.python.pylint.reportPaths=qa-automation/reports/pylint-report.json

# =============================================================================
# QUALITY GATES
# =============================================================================

# Code coverage threshold (80%+)
# sonar.coverage.exclusions=**/*test*/**,**/migrations/**

# Duplication threshold
sonar.cpd.exclusions=**/*test*/**

# =============================================================================
# SECURITY
# =============================================================================
sonar.security.hotspots.inheritance=BOTH

# =============================================================================
# ANALYSIS PARAMETERS
# =============================================================================

# New code definition
sonar.newCode.referenceBranch=main

# Branch analysis
sonar.branch.name=${GITHUB_REF_NAME}

# Pull request decoration
sonar.pullrequest.key=${GITHUB_PR_NUMBER}
sonar.pullrequest.branch=${GITHUB_HEAD_REF}
sonar.pullrequest.base=${GITHUB_BASE_REF}

