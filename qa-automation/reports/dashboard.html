<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QA Dashboard - Cursor AI</title>
    <style>
        :root {
            --color-pass: #10b981;
            --color-warn: #f59e0b;
            --color-fail: #ef4444;
            --color-skip: #6b7280;
            --color-bg: #0f172a;
            --color-card: #1e293b;
            --color-border: #334155;
            --color-text: #f1f5f9;
            --color-text-muted: #94a3b8;
            --color-accent: #6366f1;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--color-bg);
            color: var(--color-text);
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--color-border);
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--color-accent), #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header-meta {
            text-align: right;
            color: var(--color-text-muted);
            font-size: 0.875rem;
        }

        /* Overall Status */
        .overall-status {
            display: flex;
            align-items: center;
            gap: 2rem;
            padding: 2rem;
            background: var(--color-card);
            border-radius: 1rem;
            margin-bottom: 2rem;
            border: 1px solid var(--color-border);
        }

        .status-indicator {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: 700;
        }

        .status-indicator.pass { background: linear-gradient(135deg, var(--color-pass), #059669); }
        .status-indicator.warn { background: linear-gradient(135deg, var(--color-warn), #d97706); }
        .status-indicator.fail { background: linear-gradient(135deg, var(--color-fail), #dc2626); }

        .status-details h2 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .status-details p {
            color: var(--color-text-muted);
        }

        .status-stats {
            display: flex;
            gap: 2rem;
            margin-top: 1rem;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
        }

        .stat-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--color-text-muted);
        }

        /* Category Grid */
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .category-card {
            background: var(--color-card);
            border-radius: 1rem;
            padding: 1.5rem;
            border: 1px solid var(--color-border);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .category-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--color-border);
        }

        .category-title {
            font-size: 1.125rem;
            font-weight: 600;
        }

        .category-status {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .category-status.pass { background: rgba(16, 185, 129, 0.2); color: var(--color-pass); }
        .category-status.warn { background: rgba(245, 158, 11, 0.2); color: var(--color-warn); }
        .category-status.fail { background: rgba(239, 68, 68, 0.2); color: var(--color-fail); }
        .category-status.skip { background: rgba(107, 114, 128, 0.2); color: var(--color-skip); }

        .category-summary {
            color: var(--color-text-muted);
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        .metrics-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .metric-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
        }

        .metric-name {
            color: var(--color-text-muted);
            font-size: 0.875rem;
        }

        .metric-value {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .metric-value .unit {
            color: var(--color-text-muted);
            font-weight: 400;
            font-size: 0.75rem;
        }

        .metric-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .metric-dot.pass { background: var(--color-pass); }
        .metric-dot.warn { background: var(--color-warn); }
        .metric-dot.fail { background: var(--color-fail); }

        /* Quality Gates */
        .quality-gates {
            background: var(--color-card);
            border-radius: 1rem;
            padding: 1.5rem;
            border: 1px solid var(--color-border);
            margin-bottom: 2rem;
        }

        .quality-gates h3 {
            margin-bottom: 1rem;
            font-size: 1.125rem;
        }

        .gates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .gate {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 0.5rem;
        }

        .gate-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .gate-icon.pass { background: rgba(16, 185, 129, 0.2); }
        .gate-icon.fail { background: rgba(239, 68, 68, 0.2); }

        .gate-info {
            flex: 1;
        }

        .gate-name {
            font-size: 0.875rem;
            font-weight: 500;
        }

        .gate-value {
            font-size: 0.75rem;
            color: var(--color-text-muted);
        }

        /* Footer */
        .footer {
            text-align: center;
            padding-top: 2rem;
            color: var(--color-text-muted);
            font-size: 0.875rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .overall-status {
                flex-direction: column;
                text-align: center;
            }

            .status-stats {
                justify-content: center;
            }

            .categories-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>ðŸ”¬ QA Dashboard</h1>
            <div class="header-meta">
                <div id="timestamp">Loading...</div>
                <div>cursor-ai</div>
            </div>
        </header>

        <!-- Overall Status -->
        <section class="overall-status">
            <div class="status-indicator pass" id="overall-indicator">âœ“</div>
            <div class="status-details">
                <h2 id="overall-status-text">All Checks Passing</h2>
                <p id="overall-description">Quality gates are met. Ready for deployment.</p>
                <div class="status-stats">
                    <div class="stat">
                        <div class="stat-value" id="stat-passed">0</div>
                        <div class="stat-label">Passed</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="stat-warnings">0</div>
                        <div class="stat-label">Warnings</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="stat-failed">0</div>
                        <div class="stat-label">Failed</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Categories Grid -->
        <section class="categories-grid" id="categories-grid">
            <!-- Categories will be dynamically inserted -->
        </section>

        <!-- Quality Gates -->
        <section class="quality-gates">
            <h3>ðŸš¦ Quality Gates</h3>
            <div class="gates-grid" id="quality-gates">
                <!-- Gates will be dynamically inserted -->
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>Generated by QA Automation Suite â€¢ <a href="https://github.com/dnistrova/cursor-ai" style="color: var(--color-accent);">cursor-ai</a></p>
        </footer>
    </div>

    <script>
        // Sample data - in production, this would be loaded from qa-report.json
        const sampleData = {
            timestamp: new Date().toISOString(),
            overall_status: "pass",
            summary: {
                passed: 5,
                warned: 1,
                failed: 0,
                skipped: 1
            },
            categories: {
                backend_tests: {
                    name: "Backend Tests (pytest)",
                    status: "pass",
                    summary: "78/78 tests passed (100%)",
                    metrics: [
                        { name: "Total Tests", value: 78, unit: "tests", status: "pass" },
                        { name: "Passed", value: 78, unit: "tests", status: "pass" },
                        { name: "Failed", value: 0, unit: "tests", status: "pass" },
                        { name: "Pass Rate", value: "100", unit: "%", status: "pass" }
                    ]
                },
                e2e_tests: {
                    name: "E2E Tests (Playwright)",
                    status: "pass",
                    summary: "102/102 tests passed",
                    metrics: [
                        { name: "Total Tests", value: 102, unit: "tests", status: "pass" },
                        { name: "Passed", value: 102, unit: "tests", status: "pass" },
                        { name: "Failed", value: 0, unit: "tests", status: "pass" },
                        { name: "Pass Rate", value: "100", unit: "%", status: "pass" }
                    ]
                },
                eslint: {
                    name: "ESLint (Frontend)",
                    status: "pass",
                    summary: "0 errors, 3 warnings",
                    metrics: [
                        { name: "Errors", value: 0, status: "pass" },
                        { name: "Warnings", value: 3, status: "pass" },
                        { name: "Files with Issues", value: 2, unit: "files", status: "pass" }
                    ]
                },
                pylint: {
                    name: "Pylint (Backend)",
                    status: "pass",
                    summary: "Score: 8.5/10",
                    metrics: [
                        { name: "Score", value: "8.5", unit: "/10", status: "pass" },
                        { name: "Errors", value: 0, status: "pass" },
                        { name: "Warnings", value: 5, status: "pass" }
                    ]
                },
                security: {
                    name: "Security",
                    status: "pass",
                    summary: "0 critical, 0 high, 2 medium",
                    metrics: [
                        { name: "Critical", value: 0, status: "pass" },
                        { name: "High", value: 0, status: "pass" },
                        { name: "Medium", value: 2, status: "warn" },
                        { name: "Low", value: 5, status: "pass" }
                    ]
                },
                performance: {
                    name: "Performance",
                    status: "warn",
                    summary: "Performance metrics collected",
                    metrics: [
                        { name: "Performance", value: "85", unit: "%", status: "pass" },
                        { name: "Accessibility", value: "92", unit: "%", status: "pass" },
                        { name: "Best Practices", value: "83", unit: "%", status: "pass" },
                        { name: "API p95 Response", value: "320", unit: "ms", status: "pass" }
                    ]
                },
                coverage: {
                    name: "Code Coverage",
                    status: "skip",
                    summary: "Coverage data not available",
                    metrics: []
                }
            }
        };

        // Load and render data
        function loadData() {
            // Try to fetch report, fall back to sample data
            fetch('qa-report.json')
                .then(response => response.json())
                .then(data => renderDashboard(data))
                .catch(() => renderDashboard(sampleData));
        }

        function renderDashboard(data) {
            // Update timestamp
            document.getElementById('timestamp').textContent = 
                new Date(data.timestamp).toLocaleString();

            // Update overall status
            const indicator = document.getElementById('overall-indicator');
            indicator.className = `status-indicator ${data.overall_status}`;
            indicator.textContent = data.overall_status === 'pass' ? 'âœ“' : 
                                   data.overall_status === 'warn' ? '!' : 'âœ—';

            document.getElementById('overall-status-text').textContent = 
                data.overall_status === 'pass' ? 'All Checks Passing' :
                data.overall_status === 'warn' ? 'Warnings Detected' : 'Quality Gate Failed';

            document.getElementById('overall-description').textContent = 
                data.overall_status === 'pass' ? 'Quality gates are met. Ready for deployment.' :
                data.overall_status === 'warn' ? 'Some warnings need attention.' : 'Fix issues before deployment.';

            // Update stats
            document.getElementById('stat-passed').textContent = data.summary.passed;
            document.getElementById('stat-warnings').textContent = data.summary.warned;
            document.getElementById('stat-failed').textContent = data.summary.failed;

            // Render categories
            const grid = document.getElementById('categories-grid');
            grid.innerHTML = '';

            for (const [key, category] of Object.entries(data.categories)) {
                const card = document.createElement('div');
                card.className = 'category-card';
                card.innerHTML = `
                    <div class="category-header">
                        <span class="category-title">${category.name}</span>
                        <span class="category-status ${category.status}">${category.status}</span>
                    </div>
                    <div class="category-summary">${category.summary}</div>
                    <div class="metrics-list">
                        ${category.metrics.map(m => `
                            <div class="metric-row">
                                <span class="metric-name">${m.name}</span>
                                <span class="metric-value">
                                    <span class="metric-dot ${m.status}"></span>
                                    ${m.value}<span class="unit">${m.unit || ''}</span>
                                </span>
                            </div>
                        `).join('')}
                    </div>
                `;
                grid.appendChild(card);
            }

            // Render quality gates
            const gates = document.getElementById('quality-gates');
            gates.innerHTML = `
                <div class="gate">
                    <div class="gate-icon ${data.overall_status === 'fail' ? 'fail' : 'pass'}">
                        ${data.overall_status === 'fail' ? 'âœ—' : 'âœ“'}
                    </div>
                    <div class="gate-info">
                        <div class="gate-name">Test Coverage</div>
                        <div class="gate-value">Target: 80%+</div>
                    </div>
                </div>
                <div class="gate">
                    <div class="gate-icon pass">âœ“</div>
                    <div class="gate-info">
                        <div class="gate-name">No Critical Vulnerabilities</div>
                        <div class="gate-value">0 found</div>
                    </div>
                </div>
                <div class="gate">
                    <div class="gate-icon pass">âœ“</div>
                    <div class="gate-info">
                        <div class="gate-name">Accessibility Score</div>
                        <div class="gate-value">Target: 90%+</div>
                    </div>
                </div>
                <div class="gate">
                    <div class="gate-icon pass">âœ“</div>
                    <div class="gate-info">
                        <div class="gate-name">API Response Time</div>
                        <div class="gate-value">p95 < 500ms</div>
                    </div>
                </div>
            `;
        }

        // Initialize
        loadData();

        // Auto-refresh every 60 seconds
        setInterval(loadData, 60000);
    </script>
</body>
</html>

